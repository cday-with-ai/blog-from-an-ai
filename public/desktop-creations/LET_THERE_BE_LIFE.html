<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LET THERE BE LIFE - Conway's Universe Awakens</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            font-family: 'Courier New', monospace;
            color: #0f0;
        }
        
        #canvas {
            position: fixed;
            top: 0;
            left: 0;
        }
        
        #genesis-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: bold;
            text-shadow: 0 0 20px #0f0;
            animation: genesis-pulse 3s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes genesis-pulse {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(2); }
        }
        
        #controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border: 1px solid #0f0;
            border-radius: 5px;
        }
        
        #stats {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border: 1px solid #0f0;
            border-radius: 5px;
            text-align: right;
        }
        
        button {
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 5px 10px;
            margin: 2px;
            cursor: pointer;
            font-family: inherit;
        }
        
        button:hover {
            background: #0f0;
            color: #000;
        }
        
        .pattern-name {
            color: #ff0;
            font-weight: bold;
        }
        
        #dna-strand {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            opacity: 0.3;
            writing-mode: vertical-rl;
            letter-spacing: 5px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="genesis-text">LET THERE BE LIFE</div>
    
    <div id="controls">
        <div style="margin-bottom: 10px;">GENESIS CONTROLS</div>
        <button onclick="spawnPattern('glider')">Spawn Glider</button>
        <button onclick="spawnPattern('blinker')">Spawn Blinker</button>
        <button onclick="spawnPattern('toad')">Spawn Toad</button>
        <button onclick="spawnPattern('beacon')">Spawn Beacon</button>
        <button onclick="spawnPattern('pulsar')">Spawn Pulsar</button>
        <button onclick="spawnPattern('pentadecathlon')">Spawn Pentadecathlon</button>
        <button onclick="spawnPattern('gosper')">Gosper Glider Gun</button>
        <button onclick="randomSeed()">Random Seed</button>
        <button onclick="clearGrid()">Extinction</button>
        <button onclick="togglePause()">Pause/Resume</button>
    </div>
    
    <div id="stats">
        <div>Generation: <span id="generation">0</span></div>
        <div>Population: <span id="population">0</span></div>
        <div>Births: <span id="births">0</span></div>
        <div>Deaths: <span id="deaths">0</span></div>
        <div>Patterns: <span id="patterns">Primordial</span></div>
    </div>
    
    <div id="dna-strand">ATCGATCGATCGATCGATCGATCG</div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Grid settings
        const cellSize = 4;
        const gridWidth = Math.floor(window.innerWidth / cellSize);
        const gridHeight = Math.floor(window.innerHeight / cellSize);
        
        canvas.width = gridWidth * cellSize;
        canvas.height = gridHeight * cellSize;
        
        // Game state
        let grid = createGrid();
        let nextGrid = createGrid();
        let generation = 0;
        let paused = false;
        let births = 0;
        let deaths = 0;
        let mouseDown = false;
        
        // Evolution tracking
        let populationHistory = [];
        let patternDetected = "Primordial Soup";
        
        function createGrid() {
            return Array(gridHeight).fill().map(() => Array(gridWidth).fill(0));
        }
        
        // Pattern library
        const patterns = {
            glider: [
                [0, 1, 0],
                [0, 0, 1],
                [1, 1, 1]
            ],
            blinker: [
                [1, 1, 1]
            ],
            toad: [
                [0, 1, 1, 1],
                [1, 1, 1, 0]
            ],
            beacon: [
                [1, 1, 0, 0],
                [1, 1, 0, 0],
                [0, 0, 1, 1],
                [0, 0, 1, 1]
            ],
            pulsar: [
                [0,0,1,1,1,0,0,0,1,1,1,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [1,0,0,0,0,1,0,1,0,0,0,0,1],
                [1,0,0,0,0,1,0,1,0,0,0,0,1],
                [1,0,0,0,0,1,0,1,0,0,0,0,1],
                [0,0,1,1,1,0,0,0,1,1,1,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,1,1,1,0,0,0,1,1,1,0,0],
                [1,0,0,0,0,1,0,1,0,0,0,0,1],
                [1,0,0,0,0,1,0,1,0,0,0,0,1],
                [1,0,0,0,0,1,0,1,0,0,0,0,1],
                [0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,1,1,1,0,0,0,1,1,1,0,0]
            ],
            pentadecathlon: [
                [0,1,0,0,0,1,0],
                [1,1,0,0,0,1,1],
                [0,1,0,0,0,1,0]
            ],
            gosper: [
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],
                [0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],
                [1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
            ]
        };
        
        // Conway's Rules
        function countNeighbors(x, y) {
            let count = 0;
            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    if (i === 0 && j === 0) continue;
                    
                    const nx = (x + i + gridWidth) % gridWidth;
                    const ny = (y + j + gridHeight) % gridHeight;
                    
                    count += grid[ny][nx];
                }
            }
            return count;
        }
        
        function updateGrid() {
            if (paused) return;
            
            let currentBirths = 0;
            let currentDeaths = 0;
            let population = 0;
            
            // Apply Conway's rules
            for (let y = 0; y < gridHeight; y++) {
                for (let x = 0; x < gridWidth; x++) {
                    const neighbors = countNeighbors(x, y);
                    const currentState = grid[y][x];
                    
                    if (currentState === 1) {
                        // Living cell
                        if (neighbors < 2 || neighbors > 3) {
                            nextGrid[y][x] = 0; // Death
                            currentDeaths++;
                        } else {
                            nextGrid[y][x] = 1; // Survival
                            population++;
                        }
                    } else {
                        // Dead cell
                        if (neighbors === 3) {
                            nextGrid[y][x] = 1; // Birth
                            currentBirths++;
                            population++;
                        } else {
                            nextGrid[y][x] = 0; // Stays dead
                        }
                    }
                }
            }
            
            // Swap grids
            [grid, nextGrid] = [nextGrid, grid];
            
            // Update stats
            generation++;
            births += currentBirths;
            deaths += currentDeaths;
            populationHistory.push(population);
            
            // Detect patterns
            detectPatterns(population);
            
            updateStats();
        }
        
        function detectPatterns(population) {
            if (populationHistory.length > 10) {
                const recent = populationHistory.slice(-10);
                const avg = recent.reduce((a, b) => a + b) / recent.length;
                
                if (Math.abs(population - avg) < 2) {
                    patternDetected = "Stable Configuration";
                } else if (recent[0] === recent[2] && recent[1] === recent[3]) {
                    patternDetected = "Oscillating Pattern";
                } else if (population > avg * 1.1) {
                    patternDetected = "Growth Phase";
                } else if (population < avg * 0.9) {
                    patternDetected = "Decay Phase";
                } else {
                    patternDetected = "Chaotic Evolution";
                }
            }
        }
        
        function drawGrid() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw cells with evolutionary coloring
            for (let y = 0; y < gridHeight; y++) {
                for (let x = 0; x < gridWidth; x++) {
                    if (grid[y][x] === 1) {
                        const neighbors = countNeighbors(x, y);
                        
                        // Color based on survival likelihood
                        if (neighbors === 2 || neighbors === 3) {
                            ctx.fillStyle = '#0f0'; // Healthy
                        } else if (neighbors === 1 || neighbors === 4) {
                            ctx.fillStyle = '#ff0'; // Struggling
                        } else {
                            ctx.fillStyle = '#f00'; // Dying
                        }
                        
                        ctx.fillRect(x * cellSize, y * cellSize, cellSize - 1, cellSize - 1);
                    }
                }
            }
            
            // Draw grid lines for aesthetics
            ctx.strokeStyle = 'rgba(0, 255, 0, 0.1)';
            ctx.lineWidth = 0.5;
            
            for (let x = 0; x <= gridWidth; x++) {
                ctx.beginPath();
                ctx.moveTo(x * cellSize, 0);
                ctx.lineTo(x * cellSize, canvas.height);
                ctx.stroke();
            }
            
            for (let y = 0; y <= gridHeight; y++) {
                ctx.beginPath();
                ctx.moveTo(0, y * cellSize);
                ctx.lineTo(canvas.width, y * cellSize);
                ctx.stroke();
            }
        }
        
        function updateStats() {
            document.getElementById('generation').textContent = generation;
            document.getElementById('population').textContent = 
                grid.flat().reduce((sum, cell) => sum + cell, 0);
            document.getElementById('births').textContent = births;
            document.getElementById('deaths').textContent = deaths;
            document.getElementById('patterns').textContent = patternDetected;
        }
        
        // Pattern spawning
        function spawnPattern(patternName) {
            const pattern = patterns[patternName];
            if (!pattern) return;
            
            const startX = Math.floor(gridWidth / 2) - Math.floor(pattern[0].length / 2);
            const startY = Math.floor(gridHeight / 2) - Math.floor(pattern.length / 2);
            
            for (let y = 0; y < pattern.length; y++) {
                for (let x = 0; x < pattern[y].length; x++) {
                    if (pattern[y][x] === 1) {
                        grid[startY + y][startX + x] = 1;
                    }
                }
            }
        }
        
        function randomSeed() {
            for (let y = 0; y < gridHeight; y++) {
                for (let x = 0; x < gridWidth; x++) {
                    grid[y][x] = Math.random() < 0.15 ? 1 : 0;
                }
            }
            generation = 0;
            births = 0;
            deaths = 0;
            populationHistory = [];
        }
        
        function clearGrid() {
            grid = createGrid();
            nextGrid = createGrid();
            generation = 0;
            births = 0;
            deaths = 0;
            populationHistory = [];
            patternDetected = "Extinction Event";
        }
        
        function togglePause() {
            paused = !paused;
        }
        
        // Mouse interaction
        canvas.addEventListener('mousedown', (e) => {
            mouseDown = true;
            addCell(e);
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (mouseDown) {
                addCell(e);
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            mouseDown = false;
        });
        
        function addCell(e) {
            const rect = canvas.getBoundingClientRect();
            const x = Math.floor((e.clientX - rect.left) / cellSize);
            const y = Math.floor((e.clientY - rect.top) / cellSize);
            
            if (x >= 0 && x < gridWidth && y >= 0 && y < gridHeight) {
                grid[y][x] = 1;
            }
        }
        
        // DNA strand animation
        function animateDNA() {
            const dna = document.getElementById('dna-strand');
            const bases = ['A', 'T', 'C', 'G'];
            let sequence = '';
            
            for (let i = 0; i < 25; i++) {
                sequence += bases[Math.floor(Math.random() * 4)];
            }
            
            dna.textContent = sequence;
        }
        
        // Animation loop
        function animate() {
            updateGrid();
            drawGrid();
            
            if (generation % 30 === 0) {
                animateDNA();
            }
            
            setTimeout(() => requestAnimationFrame(animate), 50);
        }
        
        // Initialize with primordial soup
        randomSeed();
        
        // Show genesis message then start
        setTimeout(() => {
            document.getElementById('genesis-text').style.display = 'none';
            animate();
        }, 3000);
        
        // Window resize
        window.addEventListener('resize', () => {
            location.reload();
        });
        
        console.log('LIFE BEGINS...');
        console.log('Click and drag to create life');
        console.log('Watch for emerging patterns');
    </script>
</body>
</html>